```{r}
# Load necessary library
library(dplyr)

# Read the CSV file and convert row names to a column
data <- read.csv("ovarian_ranked_values.csv")
data <- tibble::rownames_to_column(data, var = "gene")

# Remove the "gene" columns
data <- data %>% select(-starts_with("gene"))

# Rename the "X" column to "Gene"
data <- data %>% rename(Gene = X)

# Rename the columns: replace ".1", ".2" with "-1", "-2"
colnames(data) <- gsub("\\.([0-9])", "-\\1", colnames(data))

# Print column names to verify changes
print(colnames(data))

# Define the conditions based on the corrected column names
conditions <- c("OBP2A_-1", "OBP2A_-2", "OBP2A_1", "OBP2A_2", 
                "OBP2B_-1", "OBP2B_-2", "OBP2B_1", "OBP2B_2")

# Generate and save ranked gene lists
for (condition in conditions) {
  ranked_list <- data %>%
    select(Gene, !!sym(condition)) %>%
    arrange(desc(!!sym(condition))) %>%
    na.omit()
  
  # Save to a file
  write.csv(ranked_list, paste0(condition, "_ranked_genes.csv"), row.names = FALSE)
}

cat("Ranked gene lists have been generated and saved as CSV files.")



```

